<html>
  <style>
    body {
      font-family: "Trebuchet MS", Helvetica, sans-serif;
      color: #333333;
    }

    div {
      width: 200px;
      height: 100px;
      border: 1px solid black;
    }
    table,
    tr,
    td {
      border: 1px solid gray;
      width: 50%;
    }
  </style>
  <script>
    // 1. tehtävä
    // Napin 1 painamisen funktio, joka tuottaa alertin ja siihen tekstin sekä päivämäärän
    var pvm = new Date();
    function omaFunktio() {
      alert(
        "You clicked me on " +
          pvm.getDate() +
          "." +
          (pvm.getMonth() + 1) +
          "." +
          pvm.getFullYear() +
          "!"
      );
    }
    // Napin 2 painaminen kirjoittaa sivulle html taulukon
    var html = `
      <table border='2px solid gray' widht='75%'>
        <thead>
          <tr>
            <th>Nimi</th>
            <th>Asema</th>
            <th>Kuukausipalkka</th>
          </tr>
        </thead>
        <tfoot>
        </tfoot>
        <tbody>
          <tr>
            <td>Tikri Niksu</td>
            <td>Ohjelmistoarkkitehti</td>
            <td>4670€</td>
          </tr>
          <tr>
            <td>Kari Talvela</td>
            <td>Kirjanpitäjä</td>
            <td>2650€</td>
          </tr>
          <tr>
            <td>Assi Koksa</td>
            <td>Sovelluskehittäjä</td>
            <td>3250€</td>
          </tr>
          <tr>
            <td>Severi Kylli</td>
            <td>JS ohjelmoija</td>
            <td>3100€</td>
          </tr>
        </tbody>
      </table>
        `;

    function showTable() {
      document.write(html);
    }
    //Napin 3 painaminen tulostaa sivulle HTML-taulukon
    function showPersons() {
      var persons = [
        "Nyssa P. Skinner",
        "593-4241 Lacus, St.",
        "Cape Verde",
        "Camilla F. Strickland",
        "391-2150 Ac Rd.",
        "Andorra",
        "Reagan U. Andrews",
        "P.O. Box 472, 2271 Mauris Ave",
        "Faroe Islands",
        "Kelsey D. Clark",
        "P.O. Box 866, 7793 Aliquet Ave",
        "Bulgaria",
      ];
      document.write('<table border="1"><tr>');
      for (i = 0; i < persons.length; i += 3) {
        document.write(
          "<tr><td>" +
            persons[i] +
            "</td><td>" +
            persons[i + 1] +
            "</td><td>" +
            persons[i + 2] +
            "</td></tr>"
        );
      }
      document.write("</table>");
    }
    //TEHTÄVÄ 3 - hiiren painallus tekstikentässä tuottaa ohjetekstin ja vaihtaa alueen taustaväriä.
    //Kentässä tapahtuneet näppäimistön painallukset lasketaan lopuksi yhteen.
    //Jos kenttä on tyhjä, saa käyttäjä ilmoituksen "Tekstikenttä on tyhjä".

    function tekstiOhje() {
      document.getElementById("textdata").value =
        "Please fill in the form with proper data.";
      document.getElementById("textdata").style.background = "#ffe6e6";
    }
    var laskuri = 0;
    function calcKeyPresses() {
      if (event.code == "Backspace") {
        laskuri--;
        if (laskuri < 0) laskuri = 0;
      } else {
        laskuri++;
      }
      document.getElementById("keypresses").innerText = laskuri;
    }

    function onkoTyhja() {
      if (document.getElementById("textdata").value == "") {
        alert("Tekstikenttä on tyhjä");
      }
    }
    //TEHTÄVÄ 5 - koordinaatit kentässä hiiren liikkeen mukaan
    function showXY(event) {
      var x = event.clientX;
      var y = event.clientY;
      var coord = "X coord: " + x + ", Y coord: " + y;
      document.getElementById("coordinates").innerHTML = coord;
    }
    //TEHTÄVÄ 6 - sijainnin selvittäminen ja näyttäminen

    function getLocation() {
      var x = document.getElementById("demo");
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);
      } else {
        x.innerHTML = "Geolocation is not supported by this browser.";
      }
    }
    function showPosition(position) {
      var x = document.getElementById("demo");
      x.innerHTML =
        "Latitude: " +
        position.coords.latitude +
        "<br>Longitude: " +
        position.coords.longitude;
    }
    function showLocation() {
      var loc = document.getElementById("map");
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(locPosition);
      } else {
        loc.innerHTML = "Geolocation is not supported by this browser.";
      }
    }
    //annettu Google Maps osoite antaa virheen "The Google Maps Platform server rejected your request. Invalid request. Missing the 'size' parameter."
    function locPosition(position) {
      var latlon = position.coords.latitude + "," + position.coords.longitude;
      var img_url =
        "https://maps.googleapis.com/maps/api/staticmap?center=" +
        latlon +
        "&zoom=14&size=400x300&sensor=false";
      document.getElementById("map").innerHTML = "<img src='" + img_url + "'>";
    }
  </script>

  <h2>Exercise 1</h2>
  <p>
    <!--Nappi 1 painaminen kutsuu funktiota, joka luo alertin tekstillä "You clicked me on [date]!" Funktio jolla pvm lisätään on scriptin sisällä"-->
    <button onclick="omaFunktio()">Nappi 1</button>
    <!--Nappi 2 kutsuu funktiota showTable(), joka tuottaa sivulle simppelin HTML taulukon-->
    <button onclick="showTable()">Nappi 2</button>
    <!--Nappi 3 kutsuu funktiota showPersons(), joka tulostaa sivulle HTML-taulukon-->
    <button onclick="showPersons();">Nappi 3</button>
  </p>

  <!--TEHTÄVÄ 2, hiiren vieminen otsikon päälle ja pois tuottaa tekstin consoleen-->
  <h2
    onMouseOver="console.log('Stepped over me, mouse')"
    onmouseout="console.log('Bye bye, mouse!')"
  >
    Exercise 2
  </h2>

  <ul>
    <li>
      Add an&nbsp;onMouseOver event on the&nbsp;Heading "Exercise 2" of this
      page.&nbsp;It should&nbsp;fire when the users mouse is moved over&nbsp;it.
      Output "Stepped over my a mouse!" on the console.
    </li>
    <li>
      Add another event, which will fire then the mouse leaves the Exercise 2
      -heading. This time show an alert window to the user saying: "Bye bye
      mouse!"
    </li>
  </ul>
  <h2>Exercise 3</h2>
  <p>Below you will see a simple form.</p>
  <ul>
    <li>
      Add onfocus -event to the&nbsp;textarea below. When the user enters the
      textarea, it should show a text saying: "Please fill in the form with
      proper data.". You can try modifying the background color of the box as
      well. &nbsp;
    </li>
    <li>
      Try to use onkeydown -event on the textarea. It should calculate the
      number of keypresses and output them on the screen. Could you think other
      smart ways to use it?
    </li>
    <li>
      When the form button is clicked, check if the textarea is empty. Notify
      the user with appropriate message. HINT: You can access the Textarea using
      the following command: <i>document.getElementById("textdata").value</i>.
      We will study the forms deeper in Workshops 4 and 5.
    </li>
  </ul>
  <form>
    <textarea
      id="textdata"
      onfocus="tekstiOhje()"
      onkeydown="calcKeyPresses()"
      ;
    ></textarea
    ><br />
    <button onclick="onkoTyhja();">Send me</button>
    <span id="keypresses"></span>
  </form>

  <h2>Exercise 4</h2>
  So far you have hardcoded the events into HTML tags. Make a copy of your
  exercise file and try to add the events dynamically, without touching the HTML
  at all. This can be achieved using addEventListener() -function,
  <a
    target="_blank"
    href="https://www.w3schools.com/js/js_htmldom_eventlistener.asp"
  >
    see more here</a
  >.

  <h2>Exercise 5</h2>

  <div onmousemove="showXY(event);" id="coordinates"></div>

  <p>
    Add onMouseMove -event to the DIV-element above. When you move mouse over
    the DIV (rectangle) the program should output the coordinates of your
    pointer. Try first outputting to the console using console.log.
  </p>
  <p>
    HINT. When the event occurs, call for a method showXY(event); Then in the
    actual method you can output data from the mouse event using event.clientX
    and event.clientY variables. Study the event object in the console and what
    data you can find in it.
  </p>
  <p>
    When the program is working, you can try outputting the text on the H2
    element with an id "coords" the box
  </p>
  HINT: You need to use document.getElementById("coordinates").innerHTML to
  achieve this.

  <h2>Exercise 6</h2>
  <button onclick="getLocation()">Get location</button>
  <p id="demo"></p>
  <button onclick="showLocation()">Show location</button>
  <p id="map"></p>

  <li>
    The first button should check
    <a href="https://www.w3schools.com/html/html5_geolocation.asp"
      >Geolocation</a
    >
    of the user, and output it to the console and to the page. Note: Some
    browsers might not allow you to do this. Try different browsers if you get
    errors.
  </li>
  <li>
    The second button should show your location on a Google Maps. You can see
    the map with a spesific location using the URL
    "https://maps.googleapis.com/maps/api/staticmap?center="+latlon+"&zoom=14&size=400x300&sensor=false"
    where latlon is your latitude + longitute data separated by comma (,).
  </li>
</html>
